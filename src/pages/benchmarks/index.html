<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Programming Skills Benchmarks</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <style>
    :root {
      --bg-main: #fcfcfc;
      --bg-card: #ffffff;
      --text-main: #212529;
      --border-color: #dee2e6;
      --accent-primary: #0d6efd;
    }

    body {
      background-color: var(--bg-main);
      color: var(--text-main);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    .navbar {
      border-bottom: 1px solid var(--border-color);
      background-color: #212529 !important;
    }

    .card {
      background-color: var(--bg-card);
      border: 1px solid var(--border-color);
      color: var(--text-main);
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .modal-content {
      background-color: #fff;
      color: var(--text-main);
      border-radius: 12px;
    }

    .judgment-box {
      background-color: #f0f7ff;
      border: 1px solid #cde4ff;
      border-left: 5px solid var(--accent-primary);
      color: #1a4a7a;
      border-radius: 6px;
      padding: 20px;
    }

    .code-container {
      background-color: #1e1e1e;
      border-radius: 6px;
      padding: 0;
      height: 1000px !important;
      /* ~50-60 lines */
      overflow-y: auto;
      border: 1px solid #333;
    }

    pre {
      margin: 0 !important;
      padding: 16px !important;
      background-color: transparent !important;
      color: #dcdcdc !important;
      font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
      font-size: 13px;
      line-height: 1.6;
    }

    .list-group-item {
      background-color: #fff;
      color: #495057;
      border-color: var(--border-color);
    }

    .list-group-item.active {
      background-color: var(--accent-primary);
      border-color: var(--accent-primary);
      color: #fff;
    }

    .table-responsive {
      background: #fff;
      border-radius: 8px;
    }

    .bg-light-custom {
      background-color: #fdfdfd !important;
      border-bottom: 1px solid #eee;
    }

    #modal-reasoning {
      background: rgba(0, 0, 0, 0.02);
      padding: 10px;
      border-radius: 4px;
      margin-top: 10px;
    }

    #modal-debug-info {
      background: #212529;
      color: #0dcaf0;
      border-top: 2px solid #444;
    }
  </style>
</head>

<body data-benchmarks-src="benchmarks.json">
  <!-- Header -->
  <nav class="navbar navbar-dark bg-dark">
    <div class="container">
      <span class="navbar-brand">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          style="vertical-align: middle; margin-right: 8px">
          <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
        </svg>
        Programming Skills Benchmarks
      </span>
      <button class="btn btn-sm btn-outline-light" onclick="refreshDashboard()">
        Refresh
      </button>
    </div>
  </nav>

  <!-- Model Leaderboard -->
  <div class="container mt-4">
    <div class="card shadow-sm border-0 overflow-hidden">
      <div class="card-header bg-white py-3 border-bottom-0">
        <div class="d-flex justify-content-between align-items-center">
          <h5 class="mb-0 fw-bold">Model Performance Leaderboard</h5>
          <span class="badge bg-light text-dark border small fw-normal">Based on latest runs per skill</span>
        </div>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0 border-0" id="leaderboard-table">
            <thead class="bg-light-custom">
              <tr>
                <th class="ps-4" style="width: 300px">Model</th>
                <th class="text-center">Total Skills Tested</th>
                <th class="text-center">Skills Worth Using (Improvements)</th>
                <th class="text-center">Improvement Rate</th>
                <th class="pe-4 text-end" style="width: 150px">Status</th>
              </tr>
            </thead>
            <tbody id="leaderboard-body">
              <!-- Rendered by JS -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="container mt-4">
    <div class="row g-2 align-items-end">
      <div class="col-md-3">
        <label class="form-label small fw-bold text-muted">PROVIDER</label>
        <select class="form-select form-select-sm" id="filter-provider" onchange="filterTable()"></select>
      </div>
      <div class="col-md-3">
        <label class="form-label small fw-bold text-muted">MODEL</label>
        <select class="form-select form-select-sm" id="filter-model" onchange="filterTable()"></select>
      </div>
      <div class="col-md-3">
        <label class="form-label small fw-bold text-muted">SKILL</label>
        <select class="form-select form-select-sm" id="filter-skill" onchange="filterTable()"></select>
      </div>
      <div class="col-md-3">
        <label class="form-label small fw-bold text-muted">IMPROVEMENT</label>
        <select class="form-select form-select-sm" id="filter-improvement" onchange="filterTable()">
          <option value="">All</option>
          <option value="yes">Improvement</option>
          <option value="no">Regression</option>
          <option value="neutral">Neutral</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Results Table -->
  <div class="container mt-4 mb-5">
    <div class="card shadow-sm">
      <div class="card-header bg-white py-3 border-bottom-0">
        <h5 class="mb-0 fw-bold">Benchmark Results</h5>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0" id="skills-table">
            <thead class="bg-light-custom">
              <tr>
                <th class="ps-4">Skill</th>
                <th>Date</th>
                <th>Provider</th>
                <th>Model</th>
                <th>Before</th>
                <th>After</th>
                <th>Improvement</th>
                <th class="pe-4 text-end">Action</th>
              </tr>
            </thead>
            <tbody id="skills-table-body"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Detail Modal -->
  <div class="modal fade" id="detailModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header bg-light d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center">
            <h5 class="modal-title fw-bold" id="detailModalTitle">Skill Details</h5>
            <div class="ms-3 border-start ps-3 d-flex align-items-center">
              <label class="small fw-bold text-muted text-uppercase me-2 mb-0">Model comparison</label>
              <select id="modal-model-selector" class="form-select form-select-sm"
                style="width: auto; min-width: 200px;"></select>
            </div>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <!-- Judge Summary -->
          <div class="judgment-box mb-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="mb-0 fw-bold text-uppercase">Judge Assessment</h6>
              <div class="text-end">
                <div class="small fw-bold">BASELINE: <span id="modal-before-rating" class="badge bg-secondary"></span>
                </div>
                <div class="small fw-bold mt-1">WITH SKILL: <span id="modal-after-rating"
                    class="badge bg-primary"></span></div>
              </div>
            </div>
            <div class="fs-4 fw-bold mb-1">SCORE: <span id="modal-score" class="text-primary"></span>/100 <span
                id="modal-verdict"></span></div>
            <div id="modal-reasoning" class="small"></div>
          </div>

          <!-- Test Navigator -->
          <div class="card mb-4 border-light shadow-sm">
            <div class="card-header d-flex align-items-center bg-light bg-gradient py-2">
              <select id="test-selector" class="form-select form-select-sm me-3"
                style="width: auto; min-width: 300px;"></select>
              <div class="small fw-bold text-muted text-uppercase">Test Case Navigator</div>
            </div>
            <div class="card-body bg-light bg-opacity-10">
              <div class="row g-3">
                <div class="col-md-6 text-dark">
                  <div class="small fw-bold text-muted mb-1 text-uppercase">Challenge (Input)</div>
                  <pre id="test-input" class="p-3 rounded bg-white border border-light-subtle shadow-sm"
                    style="max-height: 250px; overflow-y: auto; color: #333 !important; border: 1px solid #ddd !important;"></pre>
                </div>
                <div class="col-md-6 text-dark">
                  <div class="small fw-bold text-muted mb-1 text-uppercase">Judge Focus (Expected)</div>
                  <pre id="test-expected" class="p-3 rounded bg-white border border-light-subtle shadow-sm"
                    style="max-height: 250px; overflow-y: auto; color: #333 !important; border: 1px solid #ddd !important;"></pre>
                </div>
              </div>
            </div>
          </div>

          <!-- Tabs -->
          <ul class="nav nav-pills mb-3" id="comparisonTabs" role="tablist">
            <li class="nav-item">
              <button class="nav-link active fw-bold px-4" id="baseline-tab" data-bs-toggle="tab"
                data-bs-target="#baseline-pane" type="button">BASELINE</button>
            </li>
            <li class="nav-item">
              <button class="nav-link fw-bold px-4" id="skill-tab" data-bs-toggle="tab" data-bs-target="#skill-pane"
                type="button">WITH SKILL</button>
            </li>
          </ul>

          <div class="tab-content">
            <div class="tab-pane fade show active" id="baseline-pane">
              <div id="baseline-commentary" class="alert alert-light border shadow-sm mb-3 small"
                style="white-space: pre-wrap;"></div>
              <div class="row">
                <div class="col-md-3">
                  <div class="fw-bold small text-muted mb-2 text-uppercase">Files</div>
                  <div class="list-group list-group-flush rounded border shadow-sm" id="baseline-file-list"></div>
                </div>
                <div class="col-md-9">
                  <div class="code-container shadow-sm">
                    <pre><code id="baseline-code-view"></code></pre>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="skill-pane">
              <div id="skill-commentary" class="alert alert-light border shadow-sm mb-3 small"
                style="white-space: pre-wrap;"></div>
              <div class="row">
                <div class="col-md-3">
                  <div class="fw-bold small text-muted mb-2 text-uppercase">Files</div>
                  <div class="list-group list-group-flush rounded border shadow-sm" id="skill-file-list"></div>
                </div>
                <div class="col-md-9">
                  <div class="code-container shadow-sm">
                    <pre><code id="skill-code-view"></code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer d-flex justify-content-between">
          <div id="modal-debug-status" class="small fw-bold text-muted"></div>
          <div>
            <button type="button" class="btn btn-outline-secondary btn-sm me-2" onclick="toggleDebugInfo()">Debug
              Info</button>
            <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
        <div id="modal-debug-info" class="p-3 d-none">
          <h6 class="small fw-bold text-uppercase">Raw JSON Response</h6>
          <pre id="debug-json" style="padding: 0 !important; font-size: 11px; color: inherit !important;"></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>

  <script src="app.js?t=20260207-2244"></script>
</body>

</html>